@using Microsoft.Extensions.Localization
@using app.domain.ViewModels
@inject Microsoft.Extensions.Localization.IStringLocalizerFactory LocalizerFactory

@if (Sponsors.Length > 0)
{
    <section data-section-id="sponsors" class="bg-white py-16">
        <div class="mx-auto container px-4">
            <div class="mb-12">
                <h2 class="heading heading-1 text-dark-purple mb-4">
                    Sponsors
                </h2>
                <p class="text-gray-600 font-light max-w-3xl">
                    Thank you to everyone who makes this event possible.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                @foreach (var sponsor in Sponsors)
                {
                    <div class="flex flex-col group">
                        <!-- Logo Section with Grayscale Effect -->
                        <div class="mb-6">
                            <img src="@sponsor.LogoUrl"
                                 alt="@sponsor.Name"
                                 class="h-16 w-auto object-contain grayscale group-hover:grayscale-0 transition-all duration-300" />
                        </div>

                        <!-- Content Section -->
                        <div class="flex flex-col flex-grow">
                            <p class="text-base text-gray-600 leading-relaxed mb-4">
                                @sponsor.Description
                            </p>

                            @if (!string.IsNullOrEmpty(sponsor.WebsiteUrl))
                            {
                                <a href="@sponsor.WebsiteUrl"
                                   target="_blank"
                                   rel="noopener noreferrer"
                                   class="text-sm font-semibold text-dark-purple underline">
                                    See more
                                </a>
                            }
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}

@code {
    private IStringLocalizer? _sharedLocalizer;
    private IStringLocalizer SharedLocalizer => _sharedLocalizer ??= LocalizerFactory.Create("SharedResources", "app");

    private readonly Sponsor[] Sponsors =
    [
        new Sponsor(
            Name: ".NET Foundation",
            LogoUrl: "/assets/sponsors/dotnetfondation.webp",
            Description: "The .NET Foundation is an independent non-profit that supports a vibrant, open-source ecosystem for the .NET platform.",
            WebsiteUrl: "https://dotnetfoundation.org"
        ),
        new Sponsor(
            Name: "AWS",
            LogoUrl: "/assets/sponsors/aws.jpg",
            Description: "AWS is an Amazon subsidiary offering on-demand, pay-as-you-go cloud computing platforms and APIs, often used with autoscaling.",
            WebsiteUrl: "https://aws.amazon.com"
        ),
        new Sponsor(
            Name: "IDEM AI",
            LogoUrl: "/assets/sponsors/idem.png",
            Description: "With Idem, starting from a simple idea, AI builds a complete business. Logo, graphic charter, business plan, showcase website, web application, and allows you to easily deploy.",
            WebsiteUrl: "https://idem.africa"
        ),
    ];
}
