@using Microsoft.Extensions.Localization
@inject Microsoft.Extensions.Localization.IStringLocalizerFactory LocalizerFactory

<section id="schedule" class="bg-gray-50 py-16">
    <div class="container mx-auto px-4">
        <h2 class="heading heading-1 mb-4">
            @SharedLocalizer["NetConf_2025_Schedule_Title"]
            <span class="text-secondary font-heading font-bold">@SharedLocalizer["NetConf_2025_Schedule_TitleHighlight"]</span>
        </h2>
        <p class="text-gray-600 mb-12 max-w-3xl">
            @SharedLocalizer["NetConf_2025_Schedule_Description"]
        </p>

        <div class="max-w-4xl mx-auto">
            @foreach (var session in Sessions)
            {
                <div class="flex gap-6 mb-8 group">
                    <!-- Time Column -->
                    <div class="flex-shrink-0 w-32 text-right">
                        <div class="sticky top-24">
                            <div class="text-secondary font-heading font-bold text-lg">@session.Time</div>
                            <div class="text-gray-500 text-sm">@session.Duration</div>
                        </div>
                    </div>

                    <!-- Timeline Dot -->
                    <div class="flex-shrink-0 relative">
                        <div class="w-4 h-4 bg-secondary rounded-full mt-1.5 ring-4 ring-white group-hover:ring-secondary/20 transition-all"></div>
                        @if (session != Sessions.Last())
                        {
                            <div class="absolute top-6 left-1/2 -translate-x-1/2 w-0.5 h-full bg-gray-300"></div>
                        }
                    </div>

                    <!-- Content Column -->
                    <div class="flex-1 pb-8">
                        <div class="bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow border border-gray-100">
                            <h3 class="text-xl font-heading font-bold mb-2 text-gray-900">
                                @SharedLocalizer[session.TitleKey]
                            </h3>
                            <p class="text-gray-600 mb-4">
                                @SharedLocalizer[session.DescriptionKey]
                            </p>

                            @if (!string.IsNullOrEmpty(session.SpeakerKey))
                            {
                                <div class="flex items-center gap-2 text-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="text-secondary">
                                        <path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"></path>
                                    </svg>
                                    <span class="text-gray-700">@SharedLocalizer[session.SpeakerKey]</span>
                                </div>
                            }

                            @if (!string.IsNullOrEmpty(session.TypeKey))
                            {
                                <div class="mt-3">
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-secondary/10 text-secondary">
                                        @SharedLocalizer[session.TypeKey]
                                    </span>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="mt-12 text-center">
            <p class="text-gray-600 mb-4">@SharedLocalizer["NetConf_2025_Schedule_Footer"]</p>
        </div>
    </div>
</section>

@code {
    private IStringLocalizer? _sharedLocalizer;
    private IStringLocalizer SharedLocalizer => _sharedLocalizer ??= LocalizerFactory.Create("SharedResources", "app");

    private List<ScheduleSession> Sessions = new()
    {
        new ScheduleSession
        {
            Time = "09:00",
            Duration = "30 min",
            TitleKey = "NetConf_2025_Schedule_Session1_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session1_Description",
            TypeKey = "NetConf_2025_Schedule_Session1_Type",
            SpeakerKey = ""
        },
        new ScheduleSession
        {
            Time = "09:30",
            Duration = "45 min",
            TitleKey = "NetConf_2025_Schedule_Session2_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session2_Description",
            TypeKey = "NetConf_2025_Schedule_Session2_Type",
            SpeakerKey = "NetConf_2025_Schedule_Session2_Speaker"
        },
        new ScheduleSession
        {
            Time = "10:15",
            Duration = "15 min",
            TitleKey = "NetConf_2025_Schedule_Session3_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session3_Description",
            TypeKey = "",
            SpeakerKey = ""
        },
        new ScheduleSession
        {
            Time = "10:30",
            Duration = "45 min",
            TitleKey = "NetConf_2025_Schedule_Session4_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session4_Description",
            TypeKey = "NetConf_2025_Schedule_Session4_Type",
            SpeakerKey = "NetConf_2025_Schedule_Session4_Speaker"
        },
        new ScheduleSession
        {
            Time = "11:15",
            Duration = "45 min",
            TitleKey = "NetConf_2025_Schedule_Session5_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session5_Description",
            TypeKey = "NetConf_2025_Schedule_Session5_Type",
            SpeakerKey = "NetConf_2025_Schedule_Session5_Speaker"
        },
        new ScheduleSession
        {
            Time = "12:00",
            Duration = "60 min",
            TitleKey = "NetConf_2025_Schedule_Session6_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session6_Description",
            TypeKey = "",
            SpeakerKey = ""
        },
        new ScheduleSession
        {
            Time = "13:00",
            Duration = "45 min",
            TitleKey = "NetConf_2025_Schedule_Session7_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session7_Description",
            TypeKey = "NetConf_2025_Schedule_Session7_Type",
            SpeakerKey = "NetConf_2025_Schedule_Session7_Speaker"
        },
        new ScheduleSession
        {
            Time = "13:45",
            Duration = "45 min",
            TitleKey = "NetConf_2025_Schedule_Session8_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session8_Description",
            TypeKey = "NetConf_2025_Schedule_Session8_Type",
            SpeakerKey = "NetConf_2025_Schedule_Session8_Speaker"
        },
        new ScheduleSession
        {
            Time = "14:30",
            Duration = "30 min",
            TitleKey = "NetConf_2025_Schedule_Session9_Title",
            DescriptionKey = "NetConf_2025_Schedule_Session9_Description",
            TypeKey = "",
            SpeakerKey = ""
        }
    };

    private class ScheduleSession
    {
        public string Time { get; set; } = "";
        public string Duration { get; set; } = "";
        public string TitleKey { get; set; } = "";
        public string DescriptionKey { get; set; } = "";
        public string SpeakerKey { get; set; } = "";
        public string TypeKey { get; set; } = "";
    }
}
