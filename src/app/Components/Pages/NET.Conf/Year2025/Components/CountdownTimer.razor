<div class="relative w-fit">
    <!-- Time Left Label -->
    <span
        class="top-0 left-0 -translate-y-[calc(100%+3px)] rotate-6 absolute bg-secondary text-white px-4 py-1 rounded-lg outline-4 outline-white text-sm font-heading">
        Time left
    </span>

    <!-- Countdown Display -->
    <span class="inline-block text-4xl py-4 px-6 rounded-xl text-dark-purple bg-tertiary font-heading">
        <strong class="font-bold font-heading">@Days Days:</strong> @Hours h: @Minutes min
    </span>

    <!-- Event Date -->
    <span class="absolute bottom-0 left-full bg-primary text-white px-4 py-1 rounded-lg outline-4 outline-white text-sm font-heading">
        Date <strong class="text-white font-heading font-bold">DÃ©cembre 20, 2025</strong>
    </span>
</div>

@code {
    private int Days = 2;
    private int Hours = 12;
    private int Minutes = 28;
    private int Seconds = 33;
    private Timer? _timer;

    protected override void OnInitialized()
    {
        _timer = new Timer(UpdateCountdown, null, TimeSpan.Zero, TimeSpan.FromSeconds(1));
    }

    private void UpdateCountdown(object? state)
    {
        InvokeAsync(() =>
        {
            if (Seconds > 0)
            {
                Seconds--;
            }
            else if (Minutes > 0)
            {
                Minutes--;
                Seconds = 59;
            }
            else if (Hours > 0)
            {
                Hours--;
                Minutes = 59;
                Seconds = 59;
            }
            else if (Days > 0)
            {
                Days--;
                Hours = 23;
                Minutes = 59;
                Seconds = 59;
            }

            StateHasChanged();
        });
    }

    public void Dispose()
    {
        _timer?.Dispose();
    }
}
